import{d as V,c as E,a as l,n as Q,b as t,e as s,f as i,h as b,t as n,w as d,o as a,k,F as I,j,m as Ce,l as De,i as R,u as Ne,r as H,g as $e,U as z,p as Se,v as Me}from"./index-C0I3gvdv.js";import{c as oe,_ as x,B as Ae}from"./building-2-BynuudMn.js";import{_ as le,a as re}from"./Label.vue_vue_type_script_setup_true_lang-xiyAGt6X.js";import{T as Te,U as he,C as G,W as ve,g as ie,_ as ge,a as Le,H as Re,b as fe,c as J,d as ee,e as F,f as q,F as te,A as Ie,h as je,u as Oe,r as He}from"./UploadModal.vue_vue_type_script_setup_true_lang-DdqGjOte.js";import{F as se,U as xe,B as Ee,L as Ue}from"./user-JJg8WcWj.js";/**
 * @license lucide-vue-next v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=oe("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=oe("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-vue-next v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=oe("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=oe("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fe={class:"flex items-center gap-3"},qe={class:"flex-1"},Ve={class:"font-medium text-slate-800"},We={class:"text-sm text-slate-600"},Be={class:"flex items-center gap-1 mt-2"},Ge={class:"text-xs font-medium"},Qe={class:"text-xs text-slate-500"},Ke={key:0,class:"flex items-center gap-1"},Ye={class:"text-xs font-medium"},Xe={class:"text-xs text-slate-500"},Ze={class:"flex gap-1"},de=V({__name:"DocumentCard",props:{data:{},variant:{default:"pricing"}},emits:["download","showHistory"],setup(h,{emit:S}){const o=h,w=S;E(()=>o.variant==="library"?`Category: ${o.data.category} | ${o.data.fileType||"Reference Document"}`:`${o.data.category} | ${o.data.fileType||"Reference Document"}`);const y=E(()=>new Date(o.data.uploadDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),M=E(()=>o.data.approvedDate?new Date(o.data.approvedDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""),f=()=>{w("download",o.data.fileName)},A=()=>{var v={id:o.data.id,category:o.data.category,fileType:o.data.fileType,fileName:o.data.fileName,uploadDate:o.data.uploadDate,status:o.data.status,uploaderName:o.data.uploaderName,approverName:o.data.approverName,approvedDate:o.data.approvedDate};w("showHistory",v)};return(v,O)=>(a(),l("div",{class:Q(["flex items-center justify-between p-4 rounded-lg hover:shadow-md transition-shadow",[h.variant==="pricing"||h.variant==="scope"?"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200":"bg-gradient-to-r from-gray-50 to-gray-100 border border-gray-200"]])},[t("div",Fe,[t("div",{class:Q(["w-12 h-12 rounded-lg flex items-center justify-center",[h.variant==="pricing"||h.variant==="scope"?"bg-blue-600":"bg-gray-600"]])},[s(i(se),{class:"w-6 h-6 text-white"})],2),t("div",qe,[t("p",Ve,n(o.data.fileType),1),t("p",We,n(o.data.fileName),1),t("div",Be,[O[0]||(O[0]=t("span",{class:"text-xs text-slate-500"},"Uploaded by:",-1)),t("span",Ge,n(o.data.uploaderName),1),t("span",Qe,"("+n(y.value)+")",1)]),o.data.approverName?(a(),l("div",Ke,[O[1]||(O[1]=t("span",{class:"text-xs text-slate-500"},"Approved by:",-1)),t("span",Ye,n(o.data.approverName),1),t("span",Xe,"("+n(M.value)+")",1)])):b("",!0)])]),t("div",Ze,[s(x,{size:"sm",variant:"ghost",onClick:A,class:Q([h.variant==="pricing"||h.variant==="scope"?"hover:bg-blue-200":"hover:bg-gray-200"]),title:"Show History"},{default:d(()=>[s(i(K),{class:"w-4 h-4"})]),_:1},8,["class"]),s(x,{size:"sm",variant:"ghost",onClick:f,class:Q([h.variant==="pricing"||h.variant==="scope"?"hover:bg-blue-200":"hover:bg-gray-200"]),title:"Download"},{default:d(()=>[s(i(ae),{class:"w-4 h-4"})]),_:1},8,["class"])])],2))}}),Je=V({__name:"PricingCatalogueCard",props:{template:{}},emits:["download","showHistory"],setup(h,{emit:S}){const o=h,w=S,y=f=>{w("download",f)},M=f=>{w("showHistory",f)};return(f,A)=>(a(),k(de,{data:o.template,variant:"pricing",onDownload:y,onShowHistory:M},null,8,["data"]))}}),et=V({__name:"ScopeOfWorksCard",props:{template:{}},emits:["download","showHistory"],setup(h,{emit:S}){const o=h,w=S,y=f=>{w("download",f)},M=f=>{w("showHistory",f)};return(f,A)=>(a(),k(de,{data:o.template,variant:"scope",onDownload:y,onShowHistory:M},null,8,["data"]))}}),tt=V({__name:"WorkPackageLibraryCard",props:{template:{}},emits:["download","showHistory"],setup(h,{emit:S}){const o=h,w=S,y=f=>{w("download",f)},M=f=>{w("showHistory",f)};return(f,A)=>(a(),k(de,{data:o.template,variant:"library",onDownload:y,onShowHistory:M},null,8,["data"]))}}),st={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},at={class:"flex items-center gap-3"},ot={class:"w-10 h-10 bg-[#007d79] rounded-lg flex items-center justify-center"},nt={class:"text-lg font-semibold text-gray-900"},lt={class:"px-6 py-4 overflow-y-auto max-h-[60vh]"},rt={class:"mb-6 p-4 bg-gray-50 rounded-lg"},it={class:"grid grid-cols-[40%_60%] gap-4 text-sm"},dt={class:"grid grid-cols-[80px_100%]"},ut={class:"ml-2 text-gray-600"},ct={class:"grid grid-cols-[80px_100%]"},mt={class:"ml-2 text-gray-600"},pt={class:"grid grid-cols-[80px_100%]"},vt={class:"ml-2 text-gray-600"},gt={class:"grid grid-cols-[80px_100%]"},ft={class:"ml-2 text-gray-600"},ht={class:"space-y-4"},xt={key:0,class:"text-center py-8"},yt={key:1,class:"space-y-4"},wt={class:"flex flex-col items-center"},_t={key:0,class:"w-0.5 h-8 bg-gray-300 mt-2"},bt={class:"flex-1"},kt={class:"flex items-center justify-between mb-1"},Ct={class:"font-medium text-gray-900"},Dt={class:"text-xs text-gray-500"},Nt={class:"text-sm text-gray-600 mb-2"},$t={key:0,class:"flex items-center gap-2 text-xs text-gray-500"},St={key:1,class:"mt-2"},Mt={class:"flex gap-1 flex-wrap"},At={class:"px-6 py-4 border-t border-gray-200 flex justify-end"},Tt=V({__name:"HistoryModal",props:{isOpen:{type:Boolean},documentInfo:{}},emits:["close"],setup(h,{emit:S}){const o=h,w=S,y=E(()=>{if(!o.documentInfo)return[];const c=o.documentInfo.fileType,u=new Date(o.documentInfo.uploadDate),_=o.documentInfo.approvedDate?new Date(o.documentInfo.approvedDate):null,N=[];N.push({type:"upload",date:u.toISOString(),description:`Document uploaded as ${c} reference file for ${o.documentInfo.category}`,user:o.documentInfo.uploaderName,metadata:{description:o.documentInfo.description,category:o.documentInfo.category,version:"1.0",size:`${(Math.random()*5+1).toFixed(1)} MB`}}),o.documentInfo.status==="approved"&&_&&o.documentInfo.approverName?N.push({type:"approval",date:_.toISOString(),description:"Document approved and added to active catalogue",user:o.documentInfo.approverName,metadata:{approverRole:"CMT Senior Manager",reviewScore:["A+","A","B+","B"][Math.floor(Math.random()*4)],category:o.documentInfo.category,fileType:c}}):o.documentInfo.status==="rejected"&&_&&o.documentInfo.approverName?N.push({type:"rejection",date:_.toISOString(),description:"Document rejected - requires revision and resubmission",user:o.documentInfo.approverName,metadata:{rejectionReason:"Incomplete documentation",approverRole:"CMT Manager",category:o.documentInfo.category,fileType:c}}):o.documentInfo.status==="pending"&&N.push({type:"modification",date:new Date(u.getTime()+2*60*60*1e3).toISOString(),description:"Document submitted for review and approval",user:"Document Manager",metadata:{reviewQueue:"CMT Approval Queue",priority:"Normal",category:o.documentInfo.category,fileType:c}});const T=new Date(Date.now()-Math.random()*7*24*60*60*1e3);if(N.push({type:"download",date:T.toISOString(),description:`Document downloaded for ${c.toLowerCase()} reference`,user:M(),metadata:{department:f(),purpose:`${o.documentInfo.category} Planning`,fileType:c}}),Math.random()>.6){const $=new Date(u.getTime()+Math.random()*30*24*60*60*1e3);N.push({type:"modification",date:$.toISOString(),description:`Document updated to version 1.1 with revised ${c.toLowerCase()} specifications`,user:"Admin CMT",metadata:{updatedFields:"version, specifications, approvalDate",previousVersion:"1.0",newVersion:"1.1",changeReason:"Updated requirements",fileType:c}})}return N.sort(($,L)=>new Date(L.date).getTime()-new Date($.date).getTime())}),M=()=>{const c=["Project Manager","Procurement Officer","Contract Specialist","Engineering Lead","Operations Manager","Finance Analyst","Compliance Officer","Quality Assurance Manager"];return c[Math.floor(Math.random()*c.length)]},f=()=>{const c=["Mining Operations","Construction","Procurement","Engineering","Finance","Quality Control","Health & Safety","Environmental"];return c[Math.floor(Math.random()*c.length)]},A=()=>{w("close")},v=c=>{switch(c){case"upload":return he;case"download":return ae;case"approval":return Pe;case"rejection":return Te;case"modification":return K;default:return K}},O=c=>{switch(c){case"upload":return"bg-blue-100 text-blue-600";case"download":return"bg-green-100 text-green-600";case"approval":return"bg-emerald-100 text-emerald-600";case"rejection":return"bg-red-100 text-red-600";case"modification":return"bg-amber-100 text-amber-600";default:return"bg-gray-100 text-gray-600"}},W=c=>{switch(c){case"upload":return"Document Uploaded";case"download":return"Document Downloaded";case"approval":return"Document Approved";case"rejection":return"Document Rejected";case"modification":return"Document Modified";default:return"History Event"}},Y=c=>new Date(c).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return(c,u)=>{var _,N,T,$,L;return h.isOpen?(a(),l("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:A},[t("div",{class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden",onClick:u[0]||(u[0]=Ce(()=>{},["stop"]))},[t("div",st,[t("div",at,[t("div",ot,[s(i(K),{class:"w-5 h-5 text-white"})]),t("div",null,[u[1]||(u[1]=t("h3",{class:"text-sm text-gray-500"},"Document History",-1)),t("p",nt,n((_=h.documentInfo)==null?void 0:_.fileType),1)])]),s(x,{variant:"ghost",size:"sm",onClick:A},{default:d(()=>[s(i(ze),{class:"w-5 h-5"})]),_:1})]),t("div",lt,[t("div",rt,[u[6]||(u[6]=t("h4",{class:"font-medium text-gray-900 mb-2"},"Document Information",-1)),t("div",it,[t("div",dt,[u[2]||(u[2]=t("span",{class:"font-medium text-gray-700"},"Category",-1)),t("span",ut,": "+n((N=h.documentInfo)==null?void 0:N.category),1)]),t("div",ct,[u[3]||(u[3]=t("span",{class:"font-medium text-gray-700"},"File Name",-1)),t("span",mt,": "+n((T=h.documentInfo)==null?void 0:T.fileName),1)]),t("div",pt,[u[4]||(u[4]=t("span",{class:"font-medium text-gray-700"},"File Type",-1)),t("span",vt,": "+n(($=h.documentInfo)==null?void 0:$.fileType),1)]),t("div",gt,[u[5]||(u[5]=t("span",{class:"font-medium text-gray-700"},"Description",-1)),t("span",ft,": "+n((L=h.documentInfo)==null?void 0:L.description),1)])])]),t("div",ht,[u[9]||(u[9]=t("h4",{class:"font-medium text-gray-900 mb-4"},"History Timeline",-1)),y.value.length===0?(a(),l("div",xt,[s(i(K),{class:"w-12 h-12 mx-auto text-gray-300 mb-3"}),u[7]||(u[7]=t("p",{class:"text-gray-500"},"No history available for this document",-1))])):(a(),l("div",yt,[(a(!0),l(I,null,j(y.value,(C,X)=>(a(),l("div",{key:X,class:"flex gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50"},[t("div",wt,[t("div",{class:Q(["w-10 h-10 rounded-full flex items-center justify-center",O(C.type)])},[(a(),k(De(v(C.type)),{class:"w-5 h-5"}))],2),X<y.value.length-1?(a(),l("div",_t)):b("",!0)]),t("div",bt,[t("div",kt,[t("span",Ct,n(W(C.type)),1),t("span",Dt,n(Y(C.date)),1)]),t("p",Nt,n(C.description),1),C.user?(a(),l("div",$t,[s(i(xe),{class:"w-3 h-3"}),t("span",null,n(C.user),1)])):b("",!0),C.metadata&&Object.keys(C.metadata).length>0?(a(),l("div",St,[u[8]||(u[8]=t("div",{class:"text-xs text-gray-500 mb-1"},"Metadata:",-1)),t("div",Mt,[(a(!0),l(I,null,j(Object.entries(C.metadata),([P,Z])=>(a(),l("span",{key:P,class:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded"},n(P)+": "+n(Z),1))),128))])])):b("",!0)])]))),128))]))])]),t("div",At,[s(x,{variant:"outline",onClick:A},{default:d(()=>[...u[10]||(u[10]=[R("Close",-1)])]),_:1})])])])):b("",!0)}}}),Lt={class:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100"},Rt={class:"bg-white border-b border-slate-200 shadow-sm"},It={class:"max-w-7xl mx-auto px-8 py-4 flex items-center justify-between"},jt={class:"flex items-center gap-6"},Ot={class:"flex items-center gap-3"},Ht={class:"w-10 h-10 bg-[#007d79] rounded-lg flex items-center justify-center"},Et={class:"flex items-center gap-6"},Ut={class:"text-right"},Pt={class:"font-semibold text-slate-800"},zt={class:"max-w-7xl mx-auto px-8 py-8"},Ft={class:"flex justify-between"},qt={class:"relative w-full max-w-md"},Vt={class:"flex items-center justify-between mb-6"},Wt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Bt={key:0,class:"text-center mt-4"},Gt={class:"text-sm text-slate-500"},Qt={key:1,class:"text-center mt-4"},Kt={key:2,class:"text-center py-8"},Yt={class:"text-slate-500"},Xt={class:"flex items-center justify-between mb-6"},Zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Jt={key:0,class:"text-center mt-4"},es={class:"text-sm text-slate-500"},ts={key:1,class:"text-center mt-4"},ss={key:2,class:"text-center py-8"},as={class:"text-slate-500"},os={class:"flex items-center justify-between mb-6"},ns={key:0},ls={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},rs={key:0,class:"text-center mt-4"},is={class:"text-sm text-slate-500"},ds={key:1,class:"text-center mt-4"},us={key:1,class:"text-center py-8"},cs={class:"text-slate-500"},ms={class:"bg-white rounded-lg shadow-lg p-6"},ps={class:"space-y-6"},vs={class:"flex items-center gap-3 mb-4"},gs={class:"font-semibold text-lg text-slate-800"},fs={class:"text-sm text-slate-500"},hs={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-8"},xs={class:"flex items-start justify-between"},ys={class:"flex-1"},ws={class:"font-medium text-slate-800 mb-1"},_s=["href"],bs={key:1},ks={class:"text-sm text-slate-600 mb-2"},Cs={class:"flex gap-2 flex-wrap"},Ds={class:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded"},Ns={key:0,class:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded font-medium"},$s={class:"text-xs px-2 py-1 bg-slate-200 text-slate-700 rounded"},Ss={key:1,class:"text-center py-8 bg-slate-50 rounded-lg border border-dashed border-slate-300"},Ms={key:0,class:"text-center py-8"},As={class:"text-slate-500"},Ts={class:"bg-white rounded-lg shadow-lg p-6"},Ls={class:"flex items-center justify-between mb-6"},Rs={class:"text-sm text-slate-500"},Is={key:0,class:"space-y-4"},js={class:"flex items-start justify-between"},Os={class:"flex-1"},Hs={class:"flex items-center gap-2 mb-2"},Es={class:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded"},Us={class:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded font-medium"},Ps={class:"px-2 py-1 bg-slate-200 text-slate-700 text-xs rounded"},zs={class:"font-medium text-slate-800 mb-1"},Fs=["href"],qs={key:1},Vs={class:"text-sm text-slate-600 mb-3"},Ws={key:0,class:"mb-3"},Bs={class:"flex gap-1 flex-wrap"},Gs={class:"flex gap-2 mt-3"},Qs={key:1,class:"text-center py-12"},Ks={class:"text-lg font-medium text-slate-600 mb-2"},Ys={class:"text-slate-500"},sa=V({__name:"PlanningWorkspace",setup(h){const S=$e(),o=Ne(),{toast:w}=Oe(),y=E(()=>o.user),M=H("catalogue"),f=H("all"),A=H(!1),v=H(""),O=H(!1),W=H(null),Y=H(null),c=H(!1),u=H(!1),_=H(!1),N=["all",...Ie],T=E(()=>{if(!v.value.trim())return G.pricingCatalogue.filter(e=>e.status==="approved");const r=v.value.toLowerCase();return G.pricingCatalogue.filter(e=>e.status==="approved"&&(e.category.toLowerCase().includes(r)||e.fileType&&e.fileType.toLowerCase().includes(r)||e.fileName.toLowerCase().includes(r)))}),$=E(()=>{if(!v.value.trim())return G.scopeOfWorks.filter(e=>e.status==="approved");const r=v.value.toLowerCase();return G.scopeOfWorks.filter(e=>e.status==="approved"&&(e.category.toLowerCase().includes(r)||e.fileType&&e.fileType.toLowerCase().includes(r)||e.fileName.toLowerCase().includes(r)))}),L=E(()=>{if(!v.value.trim())return ve.map(e=>({id:e.id,fileName:e.fileName,fileType:e.fileName,category:e.category,status:"approved",uploadDate:e.uploadDate,uploaderName:"User"}));const r=v.value.toLowerCase();return ve.filter(e=>e.code.toLowerCase().includes(r)||e.category.toLowerCase().includes(r)||e.fileType&&e.fileType.toLowerCase().includes(r)||e.fileName.toLowerCase().includes(r)).map(e=>({id:e.id,fileName:e.fileName,fileType:e.fileName,category:e.category,status:"approved",uploadDate:e.uploadDate,uploaderName:"User"}))});E(()=>{if(!v.value.trim())return ne(f.value);const r=v.value.toLowerCase();return ne(f.value).filter(e=>e.fileName&&e.fileName.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.category.toLowerCase().includes(r)||e.area.toLowerCase().includes(r)||e.linkUrl&&e.linkUrl.toLowerCase().includes(r))});const C=E(()=>{if(!v.value.trim())return ue();const r=v.value.toLowerCase();return ue().filter(e=>e.fileName&&e.fileName.toLowerCase().includes(r)||e.description.toLowerCase().includes(r)||e.category.toLowerCase().includes(r)||e.area.toLowerCase().includes(r)||e.linkUrl&&e.linkUrl.toLowerCase().includes(r))}),X=()=>{o.logout(),S.push("/login")},P=r=>{w({title:"Download Started",description:`Downloading ${r}...`})},Z=r=>{W.value=r,Y.value=G.pricingCatalogue.filter(e=>e.fileType=r.fileType),O.value=!0},ye=()=>{O.value=!1,W.value=null,Y.value=null},ne=r=>{const e=ie();return r==="all"?e.filter(g=>g.workspace==="planning"&&g.status==="approved"):e.filter(g=>g.workspace==="planning"&&g.area===r&&g.status==="approved")},we=()=>ie().filter(e=>e.workspace==="planning"&&e.status==="approved"),ue=()=>ie().filter(e=>e.status==="pending_review"),_e=(r,e)=>{var g;je(r,((g=y.value)==null?void 0:g.name)||"CMT Admin")?w({title:"Document Approved",description:"Document has been approved and moved to Planning Documents."}):w({title:"Error",description:"Failed to approve document.",variant:"destructive"})},be=(r,e)=>{var g;He(r,((g=y.value)==null?void 0:g.name)||"CMT Admin")?w({title:"Document Rejected",description:"Document has been rejected."}):w({title:"Error",description:"Failed to reject document.",variant:"destructive"})},ke=r=>{const e={"Contract Request Forms":[],"Procurement Committee":[],"Submitted Docs":[]};return r.forEach(g=>{g.category==="Contract Request Form"?e["Contract Request Forms"].push(g):g.category==="Procurement Request"?e["Procurement Committee"].push(g):e["Submitted Docs"].push(g)}),e},ce=r=>{const e=r==="all"?we():ne(r);if(!v.value.trim())return e;const g=v.value.toLowerCase();return e.filter(D=>D.fileName&&D.fileName.toLowerCase().includes(g)||D.description.toLowerCase().includes(g)||D.category.toLowerCase().includes(g)||D.area.toLowerCase().includes(g)||D.linkUrl&&D.linkUrl.toLowerCase().includes(g))};return(r,e)=>{var g;return a(),l("div",Lt,[t("div",Rt,[t("div",It,[t("div",jt,[t("div",Ot,[t("div",Ht,[s(i(Ae),{class:"w-6 h-6 text-white"})]),e[15]||(e[15]=t("div",null,[t("h1",{class:"text-xl font-bold text-slate-800"},"CMT PORTAL")],-1))]),s(x,{variant:"ghost",size:"sm",onClick:e[0]||(e[0]=D=>i(S).push("/workspace-selector")),class:"flex items-center gap-2"},{default:d(()=>[s(i(Re),{class:"w-4 h-4"}),e[16]||(e[16]=R(" Home ",-1))]),_:1})]),t("div",Et,[t("div",Ut,[e[17]||(e[17]=t("p",{class:"text-sm text-slate-500"},"Welcome,",-1)),t("p",Pt,n((g=y.value)==null?void 0:g.name),1)]),s(x,{variant:"ghost",size:"icon",class:"rounded-full"},{default:d(()=>[s(i(Ee),{class:"w-5 h-5 text-slate-600"})]),_:1}),s(x,{variant:"ghost",size:"icon",class:"rounded-full"},{default:d(()=>[s(i(xe),{class:"w-5 h-5 text-slate-600"})]),_:1}),s(x,{onClick:X,variant:"ghost",size:"icon",class:"rounded-full hover:bg-red-50 hover:text-red-600"},{default:d(()=>[s(i(Ue),{class:"w-5 h-5"})]),_:1})])])]),t("div",zt,[e[40]||(e[40]=t("div",{class:"mb-8"},[t("h2",{class:"text-4xl font-light text-slate-800 mb-2"},"Planning Phase"),t("p",{class:"text-slate-500"},"Contract Reference Library & Active Planning Documents")],-1)),s(ge,{modelValue:M.value,"onUpdate:modelValue":e[13]||(e[13]=D=>M.value=D),class:"space-y-6"},{default:d(()=>{var D,me,pe;return[s(fe,{className:"bg-white p-1 shadow-sm border border-slate-200"},{default:d(()=>{var m,p;return[s(J,{value:"catalogue",className:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:d(()=>[...e[18]||(e[18]=[R(" Contract Catalogue ",-1)])]),_:1}),s(J,{value:"document",className:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:d(()=>[...e[19]||(e[19]=[R(" Planning Documents ",-1)])]),_:1}),((m=y.value)==null?void 0:m.role)===i(z).CONTRACT_MANAGEMENT_SENIOR_MANAGER||((p=y.value)==null?void 0:p.role)===i(z).CONTRACT_MANAGEMENT_SUPERVISOR?(a(),k(J,{key:0,value:"review",className:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:d(()=>[...e[20]||(e[20]=[R(" Review Required ",-1)])]),_:1})):b("",!0)]}),_:1}),s(ee,{value:"catalogue",className:"space-y-4"},{default:d(()=>{var m;return[t("div",Ft,[t("div",qt,[e[21]||(e[21]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),Se(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=p=>v.value=p),placeholder:"Search work packages, or documents...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#007d79] focus:border-[#007d79]"},null,512),[[Me,v.value]])]),((m=y.value)==null?void 0:m.role)!==i(z).USER?(a(),k(x,{key:0,onClick:e[2]||(e[2]=p=>A.value=!0),className:"bg-[#007d79] hover:bg-[#006663] flex items-center gap-2"},{default:d(()=>[s(i(he),{class:"w-4 h-4"}),e[22]||(e[22]=R(" Upload Document ",-1))]),_:1})):b("",!0)]),s(le,{class:"shadow-lg border-0"},{default:d(()=>[s(re,{class:"px-8 py-6"},{default:d(()=>[t("div",Vt,[e[23]||(e[23]=t("h3",{class:"text-2xl font-semibold text-slate-800"},"Work Package Pricing Catalogue",-1)),s(x,{variant:"ghost",size:"sm",onClick:e[3]||(e[3]=p=>c.value=!c.value),class:"flex items-center gap-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[t("span",null,n(c.value?"Show Less":"Show More"),1),c.value?(a(),k(i(q),{key:1,class:"w-4 h-4"})):(a(),k(i(F),{key:0,class:"w-4 h-4"}))]),_:1})]),t("div",Wt,[(a(!0),l(I,null,j(c.value?T.value:T.value.slice(0,4),p=>(a(),k(Je,{key:p.id,template:p,onDownload:P,onShowHistory:Z},null,8,["template"]))),128))]),!c.value&&T.value.length>4?(a(),l("div",Bt,[t("p",Gt,"And "+n(T.value.length-4)+" more items...",1),s(x,{variant:"ghost",size:"sm",onClick:e[4]||(e[4]=p=>c.value=!c.value),class:"flex items-center gap-2 mx-auto mt-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[24]||(e[24]=t("span",null,"Show More",-1)),s(i(F),{class:"w-4 h-4"})]),_:1})])):b("",!0),c.value&&T.value.length>4?(a(),l("div",Qt,[s(x,{variant:"ghost",size:"sm",onClick:e[5]||(e[5]=p=>c.value=!c.value),class:"flex items-center gap-2 mx-auto text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[25]||(e[25]=t("span",null,"Show Less",-1)),s(i(q),{class:"w-4 h-4"})]),_:1})])):b("",!0),v.value.trim()&&T.value.length===0?(a(),l("div",Kt,[s(i(se),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t("p",Yt,'No pricing catalogue items found matching "'+n(v.value)+'"',1)])):b("",!0)]),_:1})]),_:1}),s(le,{class:"shadow-lg border-0"},{default:d(()=>[s(re,{class:"px-8 py-6"},{default:d(()=>[t("div",Xt,[e[26]||(e[26]=t("h3",{class:"text-2xl font-semibold text-slate-800"},"Work Package Scope of Works",-1)),s(x,{variant:"ghost",size:"sm",onClick:e[6]||(e[6]=p=>u.value=!u.value),class:"flex items-center gap-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[t("span",null,n(u.value?"Show Less":"Show More"),1),u.value?(a(),k(i(q),{key:1,class:"w-4 h-4"})):(a(),k(i(F),{key:0,class:"w-4 h-4"}))]),_:1})]),t("div",Zt,[(a(!0),l(I,null,j(u.value?$.value:$.value.slice(0,4),p=>(a(),k(et,{key:p.id,template:p,onDownload:P,onShowHistory:Z},null,8,["template"]))),128))]),!u.value&&$.value.length>4?(a(),l("div",Jt,[t("p",es,"And "+n($.value.length-4)+" more items...",1),s(x,{variant:"ghost",size:"sm",onClick:e[7]||(e[7]=p=>u.value=!u.value),class:"flex items-center gap-2 mx-auto mt-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[27]||(e[27]=t("span",null,"Show More",-1)),s(i(F),{class:"w-4 h-4"})]),_:1})])):b("",!0),u.value&&$.value.length>2?(a(),l("div",ts,[s(x,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=p=>u.value=!u.value),class:"flex items-center gap-2 mx-auto text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[28]||(e[28]=t("span",null,"Show Less",-1)),s(i(q),{class:"w-4 h-4"})]),_:1})])):b("",!0),v.value.trim()&&$.value.length===0?(a(),l("div",ss,[s(i(se),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t("p",as,'No scope of works items found matching "'+n(v.value)+'"',1)])):b("",!0)]),_:1})]),_:1}),s(le,{class:"shadow-lg border-0"},{default:d(()=>[s(re,{class:"px-8 py-6"},{default:d(()=>[t("div",os,[e[29]||(e[29]=t("div",null,[t("h3",{class:"text-2xl font-semibold text-slate-800"},"Work Package Library"),t("p",{class:"text-slate-600"},"Archived versions of work package documents")],-1)),s(x,{variant:"ghost",size:"sm",onClick:e[9]||(e[9]=p=>_.value=!_.value),class:"flex items-center gap-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[t("span",null,n(_.value?"Show Less":"Show More"),1),_.value?(a(),k(i(q),{key:1,class:"w-4 h-4"})):(a(),k(i(F),{key:0,class:"w-4 h-4"}))]),_:1})]),L.value.length>0?(a(),l("div",ns,[t("div",ls,[(a(!0),l(I,null,j(_.value?L.value:L.value.slice(0,4),p=>(a(),k(tt,{key:p.id,template:p,onDownload:P},null,8,["template"]))),128))]),!_.value&&L.value.length>4?(a(),l("div",rs,[t("p",is," And "+n(L.value.length-4)+" more archived documents... ",1),s(x,{variant:"ghost",size:"sm",onClick:e[10]||(e[10]=p=>_.value=!_.value),class:"flex items-center gap-2 mx-auto mt-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[30]||(e[30]=t("span",null,"Show More",-1)),s(i(F),{class:"w-4 h-4"})]),_:1})])):b("",!0),_.value&&L.value.length>4?(a(),l("div",ds,[s(x,{variant:"ghost",size:"sm",onClick:e[11]||(e[11]=p=>_.value=!_.value),class:"flex items-center gap-2 mx-auto text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[31]||(e[31]=t("span",null,"Show Less",-1)),s(i(q),{class:"w-4 h-4"})]),_:1})])):b("",!0)])):(a(),l("div",us,[s(i(te),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t("p",cs,n(v.value.trim()?`No archived documents found matching "${v.value}"`:"No archived documents in library"),1)]))]),_:1})]),_:1})]}),_:1}),s(ee,{value:"document",className:"space-y-6"},{default:d(()=>[t("div",ms,[s(ge,{modelValue:f.value,"onUpdate:modelValue":e[12]||(e[12]=m=>f.value=m)},{default:d(()=>[s(fe,{className:"w-full justify-start bg-slate-100 p-1 flex-wrap"},{default:d(()=>[(a(),l(I,null,j(N,m=>s(J,{key:m,value:m,className:"data-[state=active]:bg-white px-6 py-2"},{default:d(()=>[R(n(m==="all"?"All Areas":m),1)]),_:2},1032,["value"])),64))]),_:1}),(a(),l(I,null,j(N,m=>s(ee,{key:m,value:m,className:"mt-6"},{default:d(()=>[t("div",ps,[(a(!0),l(I,null,j(Object.entries(ke(ce(m))),([p,B])=>(a(),l("div",{key:p},[t("div",vs,[s(i(te),{class:"w-5 h-5 text-[#007d79]"}),t("h4",gs,n(p),1),t("span",fs,"("+n(B.length)+")",1)]),B.length>0?(a(),l("div",hs,[(a(!0),l(I,null,j(B,U=>(a(),l("div",{key:U.id,class:"p-4 bg-slate-50 border border-slate-200 rounded-lg hover:shadow-md transition-shadow"},[t("div",xs,[t("div",ys,[t("p",ws,[U.linkUrl?(a(),l("a",{key:0,href:U.linkUrl,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 hover:underline transition-colors cursor-pointer"},[R(n(U.linkUrl)+" ",1),e[32]||(e[32]=t("span",{class:"text-xs ml-1"},"ðŸ”—",-1))],8,_s)):(a(),l("span",bs,n(U.fileName),1))]),t("p",ks,n(U.description),1),t("div",Cs,[t("span",Ds,n(U.category),1),m==="all"?(a(),l("span",Ns,n(U.area),1)):b("",!0),t("span",$s,n(new Date(U.uploadDate).toLocaleDateString()),1)])]),s(x,{size:"sm",variant:"ghost"},{default:d(()=>[s(i(ae),{class:"w-4 h-4"})]),_:1})])]))),128))])):(a(),l("div",Ss,[s(i(te),{class:"w-12 h-12 mx-auto mb-2 text-slate-300"}),e[33]||(e[33]=t("p",{class:"text-slate-500"},"No documents in this category",-1))]))]))),128))]),v.value.trim()&&ce(f.value).length===0?(a(),l("div",Ms,[s(i(se),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t("p",As,'No planning documents found matching "'+n(v.value)+'"',1)])):b("",!0)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])])]),_:1}),((D=y.value)==null?void 0:D.role)===i(z).CONTRACT_MANAGEMENT_ANALYST||((me=y.value)==null?void 0:me.role)===i(z).CONTRACT_MANAGEMENT_SENIOR_MANAGER||((pe=y.value)==null?void 0:pe.role)===i(z).CONTRACT_MANAGEMENT_SUPERVISOR?(a(),k(ee,{key:0,value:"review",className:"space-y-6"},{default:d(()=>[t("div",Ts,[t("div",Ls,[e[34]||(e[34]=t("h3",{class:"text-2xl font-semibold text-slate-800"},"Documents Pending Review",-1)),t("span",Rs,n(C.value.length)+" document(s) pending review ",1)]),C.value.length>0?(a(),l("div",Is,[(a(!0),l(I,null,j(C.value,m=>(a(),l("div",{key:m.id,class:"border border-amber-200 bg-amber-50 rounded-lg p-4 hover:shadow-md transition-shadow"},[t("div",js,[t("div",Os,[t("div",Hs,[e[35]||(e[35]=t("span",{class:"px-2 py-1 bg-amber-100 text-amber-700 text-xs font-medium rounded"}," PENDING REVIEW ",-1)),t("span",Es,n(m.category),1),t("span",Us,n(m.area),1),t("span",Ps,n(new Date(m.uploadDate).toLocaleDateString()),1)]),t("p",zs,[m.linkUrl?(a(),l("a",{key:0,href:m.linkUrl,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 hover:underline transition-colors cursor-pointer"},[R(n(m.linkUrl)+" ",1),e[36]||(e[36]=t("span",{class:"text-xs ml-1"},"ðŸ”—",-1))],8,Fs)):(a(),l("span",qs,n(m.fileName),1))]),t("p",Vs,n(m.description),1),m.metadata&&Object.keys(m.metadata).length>0?(a(),l("div",Ws,[e[37]||(e[37]=t("div",{class:"text-xs text-slate-500 mb-1"},"Metadata:",-1)),t("div",Bs,[(a(!0),l(I,null,j(Object.entries(m.metadata),([p,B])=>(a(),l("span",{key:p,class:"text-xs px-1 py-0.5 bg-gray-100 text-gray-600 rounded"},n(p)+": "+n(B),1))),128))])])):b("",!0),t("div",Gs,[s(x,{size:"sm",onClick:p=>_e(m.id),className:"bg-green-600 hover:bg-green-700 text-white"},{default:d(()=>[...e[38]||(e[38]=[R(" âœ“ Approve ",-1)])]),_:1},8,["onClick"]),s(x,{size:"sm",variant:"destructive",onClick:p=>be(m.id)},{default:d(()=>[...e[39]||(e[39]=[R("âœ— Reject",-1)])]),_:1},8,["onClick"]),s(x,{size:"sm",variant:"ghost"},{default:d(()=>[s(i(ae),{class:"w-4 h-4"})]),_:1})])])])]))),128))])):(a(),l("div",Qs,[s(i(te),{class:"w-16 h-16 mx-auto mb-4 text-slate-300"}),t("h4",Ks,n(v.value.trim()?`No Documents Found Matching "${v.value}"`:"No Documents Pending Review"),1),t("p",Ys,n(v.value.trim()?"No pending review documents match your search criteria.":"All documents have been reviewed or no documents have been submitted yet."),1)]))])]),_:1})):b("",!0)]}),_:1},8,["modelValue"])]),s(Le,{open:A.value,onClose:e[14]||(e[14]=D=>A.value=!1),workspace:"planning",preSelectedArea:f.value},null,8,["open","preSelectedArea"]),s(Tt,{"is-open":O.value,"document-info":W.value,onClose:ye},null,8,["is-open","document-info"])])}}});export{sa as default};
