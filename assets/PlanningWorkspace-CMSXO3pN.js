import{d as Y,u as J,h as Q,r as S,c as i,a as e,b as a,e as r,w as n,f as X,t as o,g,j as z,l as y,F as p,i as f,o as l}from"./index-yVQkOYLA.js";import{c as Z,B as ee,_ as u}from"./building-2-DHT0u1MQ.js";import{_ as P,a as U}from"./Label.vue_vue_type_script_setup_true_lang-DbWrKH6f.js";import{_ as M,a as te,H as se,b as V,c as k,U as ae,d as D,C as W,W as B,F as C,A as oe,u as le,g as O,e as ne,r as ie}from"./UploadModal.vue_vue_type_script_setup_true_lang-BnkSODvp.js";import{B as re,U as de,L as ce,F as $}from"./user-_Z_9P_ix.js";/**
 * @license lucide-vue-next v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=Z("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ue={class:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100"},me={class:"bg-white border-b border-slate-200 shadow-sm"},ge={class:"max-w-7xl mx-auto px-8 py-4 flex items-center justify-between"},xe={class:"flex items-center gap-6"},pe={class:"flex items-center gap-3"},fe={class:"w-10 h-10 bg-[#007d79] rounded-lg flex items-center justify-center"},ve={class:"flex items-center gap-6"},he={class:"text-right"},_e={class:"font-semibold text-slate-800"},be={class:"max-w-7xl mx-auto px-8 py-8"},we={class:"flex justify-between"},ye={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ke={class:"flex items-center gap-3"},De={class:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center"},Ce={class:"flex-1"},Ne={class:"font-medium text-slate-800"},Ae={class:"text-sm text-slate-600"},je={class:"text-xs text-slate-500 mt-1"},Re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Se={class:"flex items-center gap-3"},Pe={class:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center"},Ue={class:"flex-1"},$e={class:"font-medium text-slate-800"},Te={class:"text-sm text-slate-600"},Le={class:"text-xs text-slate-500 mt-1"},Ee={key:0,class:"space-y-4"},Fe={class:"flex items-center gap-3"},ze={class:"w-12 h-12 bg-gray-600 rounded-lg flex items-center justify-center"},Me={class:"flex-1"},Ve={class:"font-medium text-slate-800"},We={class:"text-sm text-slate-600"},Be={class:"text-xs text-slate-500 mt-1"},Oe={key:1,class:"text-center py-8"},qe={class:"bg-white rounded-lg shadow-lg p-6"},He={class:"space-y-6"},Ie={class:"flex items-center gap-3 mb-4"},Ge={class:"font-semibold text-lg text-slate-800"},Ke={class:"text-sm text-slate-500"},Ye={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-8"},Je={class:"flex items-start justify-between"},Qe={class:"flex-1"},Xe={class:"font-medium text-slate-800 mb-1"},Ze=["href"],et={key:1},tt={class:"text-sm text-slate-600 mb-2"},st={class:"flex gap-2 flex-wrap"},at={class:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded"},ot={key:0,class:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded font-medium"},lt={class:"text-xs px-2 py-1 bg-slate-200 text-slate-700 rounded"},nt={key:1,class:"text-center py-8 bg-slate-50 rounded-lg border border-dashed border-slate-300"},it={class:"bg-white rounded-lg shadow-lg p-6"},rt={class:"flex items-center justify-between mb-6"},dt={class:"text-sm text-slate-500"},ct={key:0,class:"space-y-4"},ut={class:"flex items-start justify-between"},mt={class:"flex-1"},gt={class:"flex items-center gap-2 mb-2"},xt={class:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded"},pt={class:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded font-medium"},ft={class:"px-2 py-1 bg-slate-200 text-slate-700 text-xs rounded"},vt={class:"font-medium text-slate-800 mb-1"},ht=["href"],_t={key:1},bt={class:"text-sm text-slate-600 mb-3"},wt={key:0,class:"mb-3"},yt={class:"flex gap-1 flex-wrap"},kt={class:"flex gap-2 mt-3"},Dt={key:1,class:"text-center py-12"},Pt=Y({__name:"PlanningWorkspace",setup(Ct){const T=X(),L=J(),{toast:h}=le(),_=Q(()=>L.user),E=S("catalogue"),N=S("all"),A=S(!1),F=["all",...oe],q=()=>{L.logout(),T.push("/login")},j=c=>{h({title:"Download Started",description:`Downloading ${c}...`})},H=c=>{const t=O();return c==="all"?t.filter(d=>d.workspace==="planning"&&d.status==="approved"):t.filter(d=>d.workspace==="planning"&&d.area===c&&d.status==="approved")},R=()=>O().filter(t=>t.status==="pending_review"),I=(c,t)=>{var d;ne(c,((d=_.value)==null?void 0:d.name)||"CMT Admin")?h({title:"Document Approved",description:"Document has been approved and moved to Planning Documents."}):h({title:"Error",description:"Failed to approve document.",variant:"destructive"})},G=(c,t)=>{var d;ie(c,((d=_.value)==null?void 0:d.name)||"CMT Admin")?h({title:"Document Rejected",description:"Document has been rejected."}):h({title:"Error",description:"Failed to reject document.",variant:"destructive"})},K=c=>{const t={"Contract Request Forms":[],"Procurement Committee":[],"Submitted Docs":[]};return c.forEach(d=>{d.category==="Contract Request Form"?t["Contract Request Forms"].push(d):d.category==="Procurement Request"?t["Procurement Committee"].push(d):t["Submitted Docs"].push(d)}),t};return(c,t)=>{var d;return l(),i("div",ue,[e("div",me,[e("div",ge,[e("div",xe,[e("div",pe,[e("div",fe,[a(r(ee),{class:"w-6 h-6 text-white"})]),t[5]||(t[5]=e("div",null,[e("h1",{class:"text-xl font-bold text-slate-800"},"CMT PORTAL")],-1))]),a(u,{variant:"ghost",size:"sm",onClick:t[0]||(t[0]=v=>r(T).push("/workspace-selector")),class:"flex items-center gap-2"},{default:n(()=>[a(r(se),{class:"w-4 h-4"}),t[6]||(t[6]=g(" Home ",-1))]),_:1})]),e("div",ve,[e("div",he,[t[7]||(t[7]=e("p",{class:"text-sm text-slate-500"},"Welcome,",-1)),e("p",_e,o((d=_.value)==null?void 0:d.name),1)]),a(u,{variant:"ghost",size:"icon",class:"rounded-full"},{default:n(()=>[a(r(re),{class:"w-5 h-5 text-slate-600"})]),_:1}),a(u,{variant:"ghost",size:"icon",class:"rounded-full"},{default:n(()=>[a(r(de),{class:"w-5 h-5 text-slate-600"})]),_:1}),a(u,{onClick:q,variant:"ghost",size:"icon",class:"rounded-full hover:bg-red-50 hover:text-red-600"},{default:n(()=>[a(r(ce),{class:"w-5 h-5"})]),_:1})])])]),e("div",be,[t[28]||(t[28]=e("div",{class:"mb-8"},[e("h2",{class:"text-4xl font-light text-slate-800 mb-2"},"Planning Phase"),e("p",{class:"text-slate-500"},"Contract Reference Library & Active Planning Documents")],-1)),a(M,{modelValue:E.value,"onUpdate:modelValue":t[3]||(t[3]=v=>E.value=v),class:"space-y-6"},{default:n(()=>{var v;return[e("div",we,[a(V,{className:"bg-white p-1 shadow-sm border border-slate-200"},{default:n(()=>{var s;return[a(k,{value:"catalogue",className:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:n(()=>[...t[8]||(t[8]=[g(" Contract Catalogue ",-1)])]),_:1}),a(k,{value:"document",className:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:n(()=>[...t[9]||(t[9]=[g(" Planning Documents ",-1)])]),_:1}),((s=_.value)==null?void 0:s.role)==="CMT_TEAM"?(l(),z(k,{key:0,value:"review",className:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:n(()=>[...t[10]||(t[10]=[g(" Review Required ",-1)])]),_:1})):y("",!0)]}),_:1}),a(u,{onClick:t[1]||(t[1]=s=>A.value=!0),className:"bg-[#007d79] hover:bg-[#006663] flex items-center gap-2"},{default:n(()=>[a(r(ae),{class:"w-4 h-4"}),t[11]||(t[11]=g(" Upload Document ",-1))]),_:1})]),a(D,{value:"catalogue",className:"space-y-8"},{default:n(()=>[a(P,{class:"shadow-lg border-0"},{default:n(()=>[a(U,{class:"p-8"},{default:n(()=>[t[12]||(t[12]=e("h3",{class:"text-2xl font-semibold text-slate-800 mb-6"},"Work Package Pricing Catalogue",-1)),e("div",ye,[(l(!0),i(p,null,f(r(W).pricingCatalogue,s=>(l(),i("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg hover:shadow-md transition-shadow"},[e("div",ke,[e("div",De,[a(r($),{class:"w-6 h-6 text-white"})]),e("div",Ce,[e("p",Ne,o(s.code)+" Cost Structure of "+o(s.category),1),e("p",Ae,o(s.category)+" | "+o(s.workName),1),e("p",je," Uploaded: "+o(new Date(s.uploadDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])]),a(u,{size:"sm",variant:"ghost",onClick:m=>j(s.fileName),class:"hover:bg-blue-200"},{default:n(()=>[a(r(w),{class:"w-4 h-4"})]),_:1},8,["onClick"])]))),128))])]),_:1})]),_:1}),a(P,{class:"shadow-lg border-0"},{default:n(()=>[a(U,{class:"p-8"},{default:n(()=>[t[13]||(t[13]=e("h3",{class:"text-2xl font-semibold text-slate-800 mb-6"},"Work Package Scope of Works",-1)),e("div",Re,[(l(!0),i(p,null,f(r(W).scopeOfWorks,s=>(l(),i("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200 rounded-lg hover:shadow-md transition-shadow"},[e("div",Se,[e("div",Pe,[a(r($),{class:"w-6 h-6 text-white"})]),e("div",Ue,[e("p",$e,o(s.code)+" Reference Scope of Works of "+o(s.category),1),e("p",Te,o(s.category),1),e("p",Le," Uploaded: "+o(new Date(s.uploadDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])]),a(u,{size:"sm",variant:"ghost",onClick:m=>j(s.fileName),class:"hover:bg-blue-200"},{default:n(()=>[a(r(w),{class:"w-4 h-4"})]),_:1},8,["onClick"])]))),128))])]),_:1})]),_:1}),a(P,{class:"shadow-lg border-0"},{default:n(()=>[a(U,{class:"p-8"},{default:n(()=>[t[15]||(t[15]=e("h3",{class:"text-2xl font-semibold text-slate-800 mb-6"},"Work Package Library",-1)),t[16]||(t[16]=e("p",{class:"text-slate-600 mb-4"},"Archived versions of work package documents",-1)),r(B).length>0?(l(),i("div",Ee,[(l(!0),i(p,null,f(r(B),s=>(l(),i("div",{key:s.id,class:"flex items-center justify-between p-4 bg-gradient-to-r from-gray-50 to-gray-100 border border-gray-200 rounded-lg hover:shadow-md transition-shadow"},[e("div",Fe,[e("div",ze,[a(r($),{class:"w-6 h-6 text-white"})]),e("div",Me,[e("p",Ve,o(s.code)+" "+o(s.workName?s.workName:s.category)+" (Archive) ",1),e("p",We," Category: "+o(s.category)+" | "+o(s.workName||"Reference Document"),1),e("p",Be," Uploaded: "+o(new Date(s.uploadDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),1)])]),a(u,{size:"sm",variant:"ghost",onClick:m=>j(s.fileName),class:"hover:bg-gray-200"},{default:n(()=>[a(r(w),{class:"w-4 h-4"})]),_:1},8,["onClick"])]))),128))])):(l(),i("div",Oe,[a(r(C),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t[14]||(t[14]=e("p",{class:"text-slate-500"},"No archived documents in library",-1))]))]),_:1})]),_:1})]),_:1}),a(D,{value:"document",className:"space-y-6"},{default:n(()=>[e("div",qe,[t[19]||(t[19]=e("div",{class:"flex items-center justify-between mb-6"},[e("h3",{class:"text-2xl font-semibold text-slate-800"},"Planning Documents")],-1)),a(M,{modelValue:N.value,"onUpdate:modelValue":t[2]||(t[2]=s=>N.value=s)},{default:n(()=>[a(V,{className:"w-full justify-start bg-slate-100 p-1 flex-wrap"},{default:n(()=>[(l(),i(p,null,f(F,s=>a(k,{key:s,value:s,className:"data-[state=active]:bg-white px-6 py-2"},{default:n(()=>[g(o(s==="all"?"All Areas":s),1)]),_:2},1032,["value"])),64))]),_:1}),(l(),i(p,null,f(F,s=>a(D,{key:s,value:s,className:"mt-6"},{default:n(()=>[e("div",He,[(l(!0),i(p,null,f(Object.entries(K(H(s))),([m,b])=>(l(),i("div",{key:m},[e("div",Ie,[a(r(C),{class:"w-5 h-5 text-[#007d79]"}),e("h4",Ge,o(m),1),e("span",Ke,"("+o(b.length)+")",1)]),b.length>0?(l(),i("div",Ye,[(l(!0),i(p,null,f(b,x=>(l(),i("div",{key:x.id,class:"p-4 bg-slate-50 border border-slate-200 rounded-lg hover:shadow-md transition-shadow"},[e("div",Je,[e("div",Qe,[e("p",Xe,[x.linkUrl?(l(),i("a",{key:0,href:x.linkUrl,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 hover:underline transition-colors cursor-pointer"},[g(o(x.linkUrl)+" ",1),t[17]||(t[17]=e("span",{class:"text-xs ml-1"},"ðŸ”—",-1))],8,Ze)):(l(),i("span",et,o(x.fileName),1))]),e("p",tt,o(x.description),1),e("div",st,[e("span",at,o(x.category),1),s==="all"?(l(),i("span",ot,o(x.area),1)):y("",!0),e("span",lt,o(new Date(x.uploadDate).toLocaleDateString()),1)])]),a(u,{size:"sm",variant:"ghost"},{default:n(()=>[a(r(w),{class:"w-4 h-4"})]),_:1})])]))),128))])):(l(),i("div",nt,[a(r(C),{class:"w-12 h-12 mx-auto mb-2 text-slate-300"}),t[18]||(t[18]=e("p",{class:"text-slate-500"},"No documents in this category",-1))]))]))),128))])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])])]),_:1}),((v=_.value)==null?void 0:v.role)==="CMT_TEAM"?(l(),z(D,{key:0,value:"review",className:"space-y-6"},{default:n(()=>[e("div",it,[e("div",rt,[t[20]||(t[20]=e("h3",{class:"text-2xl font-semibold text-slate-800"},"Documents Pending Review",-1)),e("span",dt,o(R().length)+" document(s) pending review ",1)]),R().length>0?(l(),i("div",ct,[(l(!0),i(p,null,f(R(),s=>(l(),i("div",{key:s.id,class:"border border-amber-200 bg-amber-50 rounded-lg p-4 hover:shadow-md transition-shadow"},[e("div",ut,[e("div",mt,[e("div",gt,[t[21]||(t[21]=e("span",{class:"px-2 py-1 bg-amber-100 text-amber-700 text-xs font-medium rounded"}," PENDING REVIEW ",-1)),e("span",xt,o(s.category),1),e("span",pt,o(s.area),1),e("span",ft,o(new Date(s.uploadDate).toLocaleDateString()),1)]),e("p",vt,[s.linkUrl?(l(),i("a",{key:0,href:s.linkUrl,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 hover:underline transition-colors cursor-pointer"},[g(o(s.linkUrl)+" ",1),t[22]||(t[22]=e("span",{class:"text-xs ml-1"},"ðŸ”—",-1))],8,ht)):(l(),i("span",_t,o(s.fileName),1))]),e("p",bt,o(s.description),1),s.metadata&&Object.keys(s.metadata).length>0?(l(),i("div",wt,[t[23]||(t[23]=e("div",{class:"text-xs text-slate-500 mb-1"},"Metadata:",-1)),e("div",yt,[(l(!0),i(p,null,f(Object.entries(s.metadata),([m,b])=>(l(),i("span",{key:m,class:"text-xs px-1 py-0.5 bg-gray-100 text-gray-600 rounded"},o(m)+": "+o(b),1))),128))])])):y("",!0),e("div",kt,[a(u,{size:"sm",onClick:m=>I(s.id),className:"bg-green-600 hover:bg-green-700 text-white"},{default:n(()=>[...t[24]||(t[24]=[g(" âœ“ Approve ",-1)])]),_:1},8,["onClick"]),a(u,{size:"sm",variant:"destructive",onClick:m=>G(s.id)},{default:n(()=>[...t[25]||(t[25]=[g("âœ— Reject",-1)])]),_:1},8,["onClick"]),a(u,{size:"sm",variant:"ghost"},{default:n(()=>[a(r(w),{class:"w-4 h-4"})]),_:1})])])])]))),128))])):(l(),i("div",Dt,[a(r(C),{class:"w-16 h-16 mx-auto mb-4 text-slate-300"}),t[26]||(t[26]=e("h4",{class:"text-lg font-medium text-slate-600 mb-2"},"No Documents Pending Review",-1)),t[27]||(t[27]=e("p",{class:"text-slate-500"},"All documents have been reviewed or no documents have been submitted yet.",-1))]))])]),_:1})):y("",!0)]}),_:1},8,["modelValue"])]),a(te,{open:A.value,onClose:t[4]||(t[4]=v=>A.value=!1),workspace:"planning",preSelectedArea:N.value},null,8,["open","preSelectedArea"])])}}});export{Pt as default};
