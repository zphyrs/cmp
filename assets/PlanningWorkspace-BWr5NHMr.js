import{d as W,c as L,a as r,n as K,b as t,e as s,f as i,h as _,t as n,k as b,w as d,o as a,u as he,F as S,j as R,m as Ne,i as T,r as U,g as $e,U as z,p as Ae,v as Le}from"./index-CSjOr_Cz.js";import{c as ce,_ as h,B as Te}from"./building-2-C5m2l9dq.js";import{_ as oe,a as le}from"./Label.vue_vue_type_script_setup_true_lang-OWL02hmK.js";import{C as re,a as ie,u as ye,W as ge,g as ne,_ as fe,b as Se,H as Re,c as xe,d as Y,e as Q,U as Me,f as F,h as B,F as X,A as Ee,i as Ue,r as Pe}from"./UploadModal.vue_vue_type_script_setup_true_lang-TNEriNLX.js";import{F as J,B as He,U as Oe,L as je}from"./user-C8CBb1h8.js";/**
 * @license lucide-vue-next v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=ce("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=ce("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-vue-next v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=ce("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ze={class:"flex items-center gap-3"},Fe={class:"flex-1"},Be={class:"font-medium text-slate-800"},We={class:"text-sm text-slate-600"},Ve={class:"flex items-center gap-1 mt-2"},qe={class:"text-xs font-medium"},Ge={class:"text-xs text-slate-500"},Ke={key:0,class:"flex items-center gap-1"},Ye={class:"text-xs font-medium"},Qe={class:"text-xs text-slate-500"},Xe={class:"flex gap-1"},Z=W({__name:"DocumentCard",props:{data:{},variant:{default:"pricing"},hideHistoryButton:{type:Boolean,default:!1}},emits:["download","showHistory"],setup(g,{emit:A}){const m=g,y=A;L(()=>m.variant==="library"?`Category: ${m.data.category} | ${m.data.fileType||"Reference Document"}`:`${m.data.category} | ${m.data.fileType||"Reference Document"}`);const w=L(()=>new Date(m.data.uploadDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})),$=L(()=>m.data.approvedDate?new Date(m.data.approvedDate).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""),f=()=>{y("download",m.data.fileName)},k=()=>{var u={id:m.data.id,category:m.data.category,fileType:m.data.fileType,fileName:m.data.fileName,uploadDate:m.data.uploadDate,status:m.data.status,uploaderName:m.data.uploaderName,approverName:m.data.approverName,approvedDate:m.data.approvedDate};y("showHistory",u)};return(u,p)=>(a(),r("div",{class:K(["flex items-center justify-between p-4 rounded-lg hover:shadow-md transition-shadow",[g.variant==="pricing"||g.variant==="scope"?"bg-gradient-to-r from-blue-50 to-blue-100 border border-blue-200":"bg-gradient-to-r from-gray-50 to-gray-100 border border-gray-200"]])},[t("div",ze,[t("div",{class:K(["w-12 h-12 rounded-lg flex items-center justify-center",[g.variant==="pricing"||g.variant==="scope"?"bg-blue-600":"bg-gray-600"]])},[s(i(J),{class:"w-6 h-6 text-white"})],2),t("div",Fe,[t("p",Be,n(m.data.fileType)+" "+n(m.data.version),1),t("p",We,n(m.data.fileName),1),t("div",Ve,[p[0]||(p[0]=t("span",{class:"text-xs text-slate-500"},"Uploaded by:",-1)),t("span",qe,n(m.data.uploaderName),1),t("span",Ge,"("+n(w.value)+")",1)]),m.data.approverName?(a(),r("div",Ke,[p[1]||(p[1]=t("span",{class:"text-xs text-slate-500"},"Approved by:",-1)),t("span",Ye,n(m.data.approverName),1),t("span",Qe,"("+n($.value)+")",1)])):_("",!0)])]),t("div",Xe,[g.hideHistoryButton?_("",!0):(a(),b(h,{key:0,size:"sm",variant:"ghost",onClick:k,class:K([g.variant==="pricing"||g.variant==="scope"?"hover:bg-blue-200":"hover:bg-gray-200"]),title:"Show History"},{default:d(()=>[s(i(ue),{class:"w-4 h-4"})]),_:1},8,["class"])),s(h,{size:"sm",variant:"ghost",onClick:f,class:K([g.variant==="pricing"||g.variant==="scope"?"hover:bg-blue-200":"hover:bg-gray-200"]),title:"Download"},{default:d(()=>[s(i(de),{class:"w-4 h-4"})]),_:1},8,["class"])])],2))}}),Je=W({__name:"PricingCatalogueCard",props:{template:{}},emits:["download","showHistory"],setup(g,{emit:A}){const m=he(),y=g,w=A,$=k=>{w("download",k)},f=k=>{w("showHistory",k)};return(k,u)=>(a(),b(Z,{data:y.template,"hide-history-button":i(m).isUser,variant:"pricing",onDownload:$,onShowHistory:f},null,8,["data","hide-history-button"]))}}),Ze=W({__name:"ScopeOfWorksCard",props:{template:{}},emits:["download","showHistory"],setup(g,{emit:A}){const m=g,y=A,w=f=>{y("download",f)},$=f=>{y("showHistory",f)};return(f,k)=>(a(),b(Z,{data:m.template,variant:"scope",onDownload:w,onShowHistory:$},null,8,["data"]))}}),et=W({__name:"WorkPackageLibraryCard",props:{template:{}},emits:["download","showHistory"],setup(g,{emit:A}){const m=g,y=A,w=f=>{y("download",f)},$=f=>{y("showHistory",f)};return(f,k)=>(a(),b(Z,{data:m.template,variant:"library",onDownload:w,onShowHistory:$},null,8,["data"]))}}),tt={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},st={class:"flex items-center gap-3"},at={class:"w-10 h-10 bg-[#007d79] rounded-lg flex items-center justify-center"},ot={class:"text-lg font-semibold text-gray-900"},lt={class:"px-6 py-4 overflow-y-auto max-h-[60vh]"},nt={class:"mb-6 p-4 bg-gray-50 rounded-lg"},rt={class:"grid grid-cols-[40%_60%] gap-4 text-sm"},it={class:"grid grid-cols-[80px_auto]"},dt={class:"ml-2 text-gray-600"},ut={class:"grid grid-cols-[80px_auto]"},ct={class:"ml-2 text-gray-600"},mt={class:"grid grid-cols-[80px_auto]"},pt={class:"ml-2 text-gray-600"},vt={class:"grid grid-cols-[80px_auto]"},gt={class:"ml-2 text-gray-600"},ft={class:"space-y-4"},xt={key:0,class:"text-center py-8"},ht={key:1,class:"space-y-4"},yt={class:"px-6 py-4 border-t border-gray-200 flex justify-end"},wt=W({__name:"HistoryModal",props:{isOpen:{type:Boolean},documentInfo:{}},emits:["close"],setup(g,{emit:A}){const{toast:m}=ye(),y=g,w=A,$=L(()=>y.documentInfo?re.filter(u=>{var p,M;return u.fileType===((p=y.documentInfo)==null?void 0:p.fileType)&&u.category===((M=y.documentInfo)==null?void 0:M.category)&&u.approvedDate}).sort((u,p)=>(p.approvedDate?new Date(p.approvedDate).getTime():0)-(u.approvedDate?new Date(u.approvedDate).getTime():0)):[]),f=()=>{w("close")},k=u=>{m({title:"Download Started",description:`Downloading ${u}...`})};return(u,p)=>{var M,C,D,N,V;return g.isOpen?(a(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:f},[t("div",{class:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[80vh] overflow-hidden",onClick:p[0]||(p[0]=Ne(()=>{},["stop"]))},[t("div",tt,[t("div",st,[t("div",at,[s(i(ue),{class:"w-5 h-5 text-white"})]),t("div",null,[p[1]||(p[1]=t("h3",{class:"text-sm text-gray-500"},"Document History",-1)),t("p",ot,n((M=g.documentInfo)==null?void 0:M.fileType),1)])]),s(h,{variant:"ghost",size:"sm",onClick:f},{default:d(()=>[s(i(Ie),{class:"w-5 h-5"})]),_:1})]),t("div",lt,[t("div",nt,[p[6]||(p[6]=t("h4",{class:"font-medium text-gray-900 mb-2"},"Document Information",-1)),t("div",rt,[t("div",it,[p[2]||(p[2]=t("span",{class:"font-medium text-gray-700"},"Category",-1)),t("span",dt,": "+n((C=g.documentInfo)==null?void 0:C.category),1)]),t("div",ut,[p[3]||(p[3]=t("span",{class:"font-medium text-gray-700"},"File Name",-1)),t("span",ct,": "+n((D=g.documentInfo)==null?void 0:D.fileName),1)]),t("div",mt,[p[4]||(p[4]=t("span",{class:"font-medium text-gray-700"},"File Type",-1)),t("span",pt,": "+n((N=g.documentInfo)==null?void 0:N.fileType),1)]),t("div",vt,[p[5]||(p[5]=t("span",{class:"font-medium text-gray-700"},"Description",-1)),t("span",gt,": "+n((V=g.documentInfo)==null?void 0:V.description),1)])])]),t("div",ft,[p[8]||(p[8]=t("h4",{class:"font-medium text-gray-900 mb-4"},"History Timeline",-1)),$.value.length===0?(a(),r("div",xt,[s(i(ue),{class:"w-12 h-12 mx-auto text-gray-300 mb-3"}),p[7]||(p[7]=t("p",{class:"text-gray-500"},"No history available for this document",-1))])):(a(),r("div",ht,[(a(!0),r(S,null,R($.value,(G,ee)=>(a(),r("div",{key:ee,class:"flex gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50"},[s(Z,{class:"w-full","hide-history-button":!0,data:G,variant:G.category===i(ie).PRICING_CATALOGUE?"pricing":"scope",onDownload:k},null,8,["data","variant"])]))),128))]))])]),t("div",yt,[s(h,{variant:"outline",onClick:f},{default:d(()=>[...p[9]||(p[9]=[T("Close",-1)])]),_:1})])])])):_("",!0)}}}),_t={class:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100"},bt={class:"bg-white border-b border-slate-200 shadow-sm"},kt={class:"max-w-7xl mx-auto px-8 py-4 flex items-center justify-between"},Ct={class:"flex items-center gap-6"},Dt={class:"flex items-center gap-3"},Nt={class:"w-10 h-10 bg-[#007d79] rounded-lg flex items-center justify-center"},$t={class:"flex items-center gap-6"},At={class:"text-right"},Lt={class:"font-semibold text-slate-800"},Tt={class:"max-w-7xl mx-auto px-8 py-8"},St={class:"flex justify-between"},Rt={class:"relative w-full max-w-md"},Mt={class:"flex items-center justify-between mb-6"},Et={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={key:0,class:"text-center mt-4"},Pt={class:"text-sm text-slate-500"},Ht={key:1,class:"text-center mt-4"},Ot={key:2,class:"text-center py-8"},jt={class:"text-slate-500"},It={class:"flex items-center justify-between mb-6"},zt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ft={key:0,class:"text-center mt-4"},Bt={class:"text-sm text-slate-500"},Wt={key:1,class:"text-center mt-4"},Vt={key:2,class:"text-center py-8"},qt={class:"text-slate-500"},Gt={class:"flex items-center justify-between mb-6"},Kt={key:0},Yt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Qt={key:0,class:"text-center mt-4"},Xt={class:"text-sm text-slate-500"},Jt={key:1,class:"text-center mt-4"},Zt={key:1,class:"text-center py-8"},es={class:"text-slate-500"},ts={class:"bg-white rounded-lg shadow-lg p-6"},ss={class:"space-y-6"},as={class:"flex items-center gap-3 mb-4"},os={class:"font-semibold text-lg text-slate-800"},ls={class:"text-sm text-slate-500"},ns={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-8"},rs={class:"flex items-start justify-between"},is={class:"flex-1"},ds={class:"font-medium text-slate-800 mb-1"},us=["href"],cs={key:1},ms={class:"text-sm text-slate-600 mb-2"},ps={class:"flex gap-2 flex-wrap"},vs={class:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded"},gs={key:0,class:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded font-medium"},fs={class:"text-xs px-2 py-1 bg-slate-200 text-slate-700 rounded"},xs={key:1,class:"text-center py-8 bg-slate-50 rounded-lg border border-dashed border-slate-300"},hs={key:0,class:"text-center py-8"},ys={class:"text-slate-500"},ws={class:"bg-white rounded-lg shadow-lg p-6"},_s={class:"flex items-center justify-between mb-6"},bs={class:"text-sm text-slate-500"},ks={key:0,class:"space-y-4"},Cs={class:"flex items-start justify-between"},Ds={class:"flex-1"},Ns={class:"flex items-center gap-2 mb-2"},$s={class:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded"},As={class:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded font-medium"},Ls={class:"px-2 py-1 bg-slate-200 text-slate-700 text-xs rounded"},Ts={class:"font-medium text-slate-800 mb-1"},Ss=["href"],Rs={key:1},Ms={class:"text-sm text-slate-600 mb-3"},Es={key:0,class:"mb-3"},Us={class:"flex gap-1 flex-wrap"},Ps={class:"flex gap-2 mt-3"},Hs={key:1,class:"text-center py-12"},Os={class:"text-lg font-medium text-slate-600 mb-2"},js={class:"text-slate-500"},Vs=W({__name:"PlanningWorkspace",setup(g){const A=$e(),m=he(),{toast:y}=ye(),w=L(()=>m.user),$=U("catalogue"),f=U("all"),k=U(!1),u=U(""),p=U(!1),M=U(null),C=U(!1),D=U(!1),N=U(!1),V=["all",...Ee],G=L(()=>{const l=re.filter(o=>o.category==ie.PRICING_CATALOGUE&&o.status==="approved"),e=new Map;return l.forEach(o=>{const x=o.fileType,I=new Date(o.approvedDate||o.uploadDate);if(!e.has(x))e.set(x,o);else{const P=e.get(x),c=new Date(P.approvedDate||P.uploadDate);I>c&&e.set(x,o)}}),Array.from(e.values())}),ee=L(()=>{const l=re.filter(o=>o.category==ie.SCOPE_OF_WORKS&&o.status==="approved"),e=new Map;return l.forEach(o=>{const x=o.fileType,I=new Date(o.approvedDate||o.uploadDate);if(!e.has(x))e.set(x,o);else{const P=e.get(x),c=new Date(P.approvedDate||P.uploadDate);I>c&&e.set(x,o)}}),Array.from(e.values())}),H=L(()=>{const l=G.value;if(!u.value.trim())return l;const e=u.value.toLowerCase();return l.filter(o=>o.category.toLowerCase().includes(e)||o.fileType&&o.fileType.toLowerCase().includes(e)||o.fileName.toLowerCase().includes(e))}),O=L(()=>{const l=ee.value;if(!u.value.trim())return l;const e=u.value.toLowerCase();return l.filter(o=>o.category.toLowerCase().includes(e)||o.fileType&&o.fileType.toLowerCase().includes(e)||o.fileName.toLowerCase().includes(e))}),j=L(()=>{if(!u.value.trim())return ge.map(e=>({id:e.id,fileName:e.fileName,fileType:e.fileName,category:e.category,status:"approved",uploadDate:e.uploadDate,uploaderName:"User"}));const l=u.value.toLowerCase();return ge.filter(e=>e.code.toLowerCase().includes(l)||e.category.toLowerCase().includes(l)||e.fileType&&e.fileType.toLowerCase().includes(l)||e.fileName.toLowerCase().includes(l)).map(e=>({id:e.id,fileName:e.fileName,fileType:e.fileName,category:e.category,status:"approved",uploadDate:e.uploadDate,uploaderName:"User"}))});L(()=>{if(!u.value.trim())return ae(f.value);const l=u.value.toLowerCase();return ae(f.value).filter(e=>e.fileName&&e.fileName.toLowerCase().includes(l)||e.description.toLowerCase().includes(l)||e.category.toLowerCase().includes(l)||e.area.toLowerCase().includes(l)||e.linkUrl&&e.linkUrl.toLowerCase().includes(l))});const te=L(()=>{if(!u.value.trim())return pe();const l=u.value.toLowerCase();return pe().filter(e=>e.fileName&&e.fileName.toLowerCase().includes(l)||e.description.toLowerCase().includes(l)||e.category.toLowerCase().includes(l)||e.area.toLowerCase().includes(l)||e.linkUrl&&e.linkUrl.toLowerCase().includes(l))}),we=()=>{m.logout(),A.push("/login")},se=l=>{y({title:"Download Started",description:`Downloading ${l}...`})},me=l=>{M.value=l,p.value=!0},_e=()=>{p.value=!1,M.value=null},ae=l=>{const e=ne();return l==="all"?e.filter(o=>o.workspace==="planning"&&o.status==="approved"):e.filter(o=>o.workspace==="planning"&&o.area===l&&o.status==="approved")},be=()=>ne().filter(e=>e.workspace==="planning"&&e.status==="approved"),pe=()=>ne().filter(e=>e.status==="pending_review"),ke=(l,e)=>{var o;Ue(l,((o=w.value)==null?void 0:o.name)||"CMT Admin")?y({title:"Document Approved",description:"Document has been approved and moved to Planning Documents."}):y({title:"Error",description:"Failed to approve document.",variant:"destructive"})},Ce=(l,e)=>{var o;Pe(l,((o=w.value)==null?void 0:o.name)||"CMT Admin")?y({title:"Document Rejected",description:"Document has been rejected."}):y({title:"Error",description:"Failed to reject document.",variant:"destructive"})},De=l=>{const e={"Contract Request Forms":[],"Procurement Committee":[],"Submitted Docs":[]};return l.forEach(o=>{o.category==="Contract Request Form"?e["Contract Request Forms"].push(o):o.category==="Procurement Request"?e["Procurement Committee"].push(o):e["Submitted Docs"].push(o)}),e},ve=l=>{const e=l==="all"?be():ae(l);if(!u.value.trim())return e;const o=u.value.toLowerCase();return e.filter(x=>x.fileName&&x.fileName.toLowerCase().includes(o)||x.description.toLowerCase().includes(o)||x.category.toLowerCase().includes(o)||x.area.toLowerCase().includes(o)||x.linkUrl&&x.linkUrl.toLowerCase().includes(o))};return(l,e)=>{var o;return a(),r("div",_t,[t("div",bt,[t("div",kt,[t("div",Ct,[t("div",Dt,[t("div",Nt,[s(i(Te),{class:"w-6 h-6 text-white"})]),e[15]||(e[15]=t("div",null,[t("h1",{class:"text-xl font-bold text-slate-800"},"CMT PORTAL")],-1))]),s(h,{variant:"ghost",size:"sm",onClick:e[0]||(e[0]=x=>i(A).push("/workspace-selector")),className:"flex items-center gap-2"},{default:d(()=>[s(i(Re),{class:"w-4 h-4"}),e[16]||(e[16]=T(" Home ",-1))]),_:1})]),t("div",$t,[t("div",At,[e[17]||(e[17]=t("p",{class:"text-sm text-slate-500"},"Welcome,",-1)),t("p",Lt,n((o=w.value)==null?void 0:o.name),1)]),s(h,{variant:"ghost",size:"icon",className:"rounded-full"},{default:d(()=>[s(i(He),{class:"w-5 h-5 text-slate-600"})]),_:1}),s(h,{variant:"ghost",size:"icon",className:"rounded-full"},{default:d(()=>[s(i(Oe),{class:"w-5 h-5 text-slate-600"})]),_:1}),s(h,{onClick:we,variant:"ghost",size:"icon",className:"rounded-full hover:bg-red-50 hover:text-red-600"},{default:d(()=>[s(i(je),{class:"w-5 h-5"})]),_:1})])])]),t("div",Tt,[e[40]||(e[40]=t("div",{class:"mb-8"},[t("h2",{class:"text-4xl font-light text-slate-800 mb-2"},"Planning Phase"),t("p",{class:"text-slate-500"},"Contract Reference Library & Active Planning Documents")],-1)),s(fe,{modelValue:$.value,"onUpdate:modelValue":e[13]||(e[13]=x=>$.value=x),class:"space-y-6"},{default:d(()=>{var x,I,P;return[s(xe,{className:"bg-white p-1 shadow-sm border border-slate-200"},{default:d(()=>{var c,v;return[s(Y,{value:"catalogue",className:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:d(()=>[...e[18]||(e[18]=[T(" Contract Catalogue ",-1)])]),_:1}),s(Y,{value:"document",className:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:d(()=>[...e[19]||(e[19]=[T(" Planning Documents ",-1)])]),_:1}),((c=w.value)==null?void 0:c.role)===i(z).CONTRACT_MANAGEMENT_SENIOR_MANAGER||((v=w.value)==null?void 0:v.role)===i(z).CONTRACT_MANAGEMENT_SUPERVISOR?(a(),b(Y,{key:0,value:"review",className:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:d(()=>[...e[20]||(e[20]=[T(" Review Required ",-1)])]),_:1})):_("",!0)]}),_:1}),s(Q,{value:"catalogue",className:"space-y-4"},{default:d(()=>{var c;return[t("div",St,[t("div",Rt,[e[21]||(e[21]=t("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[t("svg",{class:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1)),Ae(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=v=>u.value=v),placeholder:"Search work packages, or documents...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#007d79] focus:border-[#007d79]"},null,512),[[Le,u.value]])]),((c=w.value)==null?void 0:c.role)!==i(z).USER?(a(),b(h,{key:0,onClick:e[2]||(e[2]=v=>k.value=!0),className:"bg-[#007d79] hover:bg-[#006663] flex items-center gap-2"},{default:d(()=>[s(i(Me),{class:"w-4 h-4"}),e[22]||(e[22]=T(" Upload Document ",-1))]),_:1})):_("",!0)]),s(oe,{class:"shadow-lg border-0"},{default:d(()=>[s(le,{class:"px-8 py-6"},{default:d(()=>[t("div",Mt,[e[23]||(e[23]=t("h3",{class:"text-2xl font-semibold text-slate-800"},"Work Package Pricing Catalogue",-1)),s(h,{variant:"ghost",size:"sm",onClick:e[3]||(e[3]=v=>C.value=!C.value),className:"flex items-center gap-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[t("span",null,n(C.value?"Show Less":"Show More"),1),C.value?(a(),b(i(B),{key:1,class:"w-4 h-4"})):(a(),b(i(F),{key:0,class:"w-4 h-4"}))]),_:1})]),t("div",Et,[(a(!0),r(S,null,R(C.value?H.value:H.value.slice(0,4),v=>(a(),b(Je,{key:v.id,template:v,onDownload:se,onShowHistory:me},null,8,["template"]))),128))]),!C.value&&H.value.length>4?(a(),r("div",Ut,[t("p",Pt,"And "+n(H.value.length-4)+" more items...",1),s(h,{variant:"ghost",size:"sm",onClick:e[4]||(e[4]=v=>C.value=!C.value),className:"flex items-center gap-2 mx-auto mt-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[24]||(e[24]=t("span",null,"Show More",-1)),s(i(F),{class:"w-4 h-4"})]),_:1})])):_("",!0),C.value&&H.value.length>4?(a(),r("div",Ht,[s(h,{variant:"ghost",size:"sm",onClick:e[5]||(e[5]=v=>C.value=!C.value),className:"flex items-center gap-2 mx-auto text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[25]||(e[25]=t("span",null,"Show Less",-1)),s(i(B),{class:"w-4 h-4"})]),_:1})])):_("",!0),u.value.trim()&&H.value.length===0?(a(),r("div",Ot,[s(i(J),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t("p",jt,'No pricing catalogue items found matching "'+n(u.value)+'"',1)])):_("",!0)]),_:1})]),_:1}),s(oe,{class:"shadow-lg border-0"},{default:d(()=>[s(le,{class:"px-8 py-6"},{default:d(()=>[t("div",It,[e[26]||(e[26]=t("h3",{class:"text-2xl font-semibold text-slate-800"},"Work Package Scope of Works",-1)),s(h,{variant:"ghost",size:"sm",onClick:e[6]||(e[6]=v=>D.value=!D.value),className:"flex items-center gap-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[t("span",null,n(D.value?"Show Less":"Show More"),1),D.value?(a(),b(i(B),{key:1,class:"w-4 h-4"})):(a(),b(i(F),{key:0,class:"w-4 h-4"}))]),_:1})]),t("div",zt,[(a(!0),r(S,null,R(D.value?O.value:O.value.slice(0,4),v=>(a(),b(Ze,{key:v.id,template:v,onDownload:se,onShowHistory:me},null,8,["template"]))),128))]),!D.value&&O.value.length>4?(a(),r("div",Ft,[t("p",Bt,"And "+n(O.value.length-4)+" more items...",1),s(h,{variant:"ghost",size:"sm",onClick:e[7]||(e[7]=v=>D.value=!D.value),className:"flex items-center gap-2 mx-auto mt-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[27]||(e[27]=t("span",null,"Show More",-1)),s(i(F),{class:"w-4 h-4"})]),_:1})])):_("",!0),D.value&&O.value.length>2?(a(),r("div",Wt,[s(h,{variant:"ghost",size:"sm",onClick:e[8]||(e[8]=v=>D.value=!D.value),className:"flex items-center gap-2 mx-auto text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[28]||(e[28]=t("span",null,"Show Less",-1)),s(i(B),{class:"w-4 h-4"})]),_:1})])):_("",!0),u.value.trim()&&O.value.length===0?(a(),r("div",Vt,[s(i(J),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t("p",qt,'No scope of works items found matching "'+n(u.value)+'"',1)])):_("",!0)]),_:1})]),_:1}),s(oe,{class:"shadow-lg border-0"},{default:d(()=>[s(le,{class:"px-8 py-6"},{default:d(()=>[t("div",Gt,[e[29]||(e[29]=t("div",null,[t("h3",{class:"text-2xl font-semibold text-slate-800"},"Work Package Library"),t("p",{class:"text-slate-600"},"Archived versions of work package documents")],-1)),s(h,{variant:"ghost",size:"sm",onClick:e[9]||(e[9]=v=>N.value=!N.value),className:"flex items-center gap-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[t("span",null,n(N.value?"Show Less":"Show More"),1),N.value?(a(),b(i(B),{key:1,class:"w-4 h-4"})):(a(),b(i(F),{key:0,class:"w-4 h-4"}))]),_:1})]),j.value.length>0?(a(),r("div",Kt,[t("div",Yt,[(a(!0),r(S,null,R(N.value?j.value:j.value.slice(0,4),v=>(a(),b(et,{key:v.id,template:v,onDownload:se},null,8,["template"]))),128))]),!N.value&&j.value.length>4?(a(),r("div",Qt,[t("p",Xt," And "+n(j.value.length-4)+" more archived documents... ",1),s(h,{variant:"ghost",size:"sm",onClick:e[10]||(e[10]=v=>N.value=!N.value),className:"flex items-center gap-2 mx-auto mt-2 text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[30]||(e[30]=t("span",null,"Show More",-1)),s(i(F),{class:"w-4 h-4"})]),_:1})])):_("",!0),N.value&&j.value.length>4?(a(),r("div",Jt,[s(h,{variant:"ghost",size:"sm",onClick:e[11]||(e[11]=v=>N.value=!N.value),className:"flex items-center gap-2 mx-auto text-[#007d79] hover:bg-[#007d79] hover:text-white"},{default:d(()=>[e[31]||(e[31]=t("span",null,"Show Less",-1)),s(i(B),{class:"w-4 h-4"})]),_:1})])):_("",!0)])):(a(),r("div",Zt,[s(i(X),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t("p",es,n(u.value.trim()?`No archived documents found matching "${u.value}"`:"No archived documents in library"),1)]))]),_:1})]),_:1})]}),_:1}),s(Q,{value:"document",className:"space-y-6"},{default:d(()=>[t("div",ts,[s(fe,{modelValue:f.value,"onUpdate:modelValue":e[12]||(e[12]=c=>f.value=c)},{default:d(()=>[s(xe,{className:"w-full justify-start bg-slate-100 p-1 flex-wrap"},{default:d(()=>[(a(),r(S,null,R(V,c=>s(Y,{key:c,value:c,className:"data-[state=active]:bg-white px-6 py-2"},{default:d(()=>[T(n(c==="all"?"All Areas":c),1)]),_:2},1032,["value"])),64))]),_:1}),(a(),r(S,null,R(V,c=>s(Q,{key:c,value:c,className:"mt-6"},{default:d(()=>[t("div",ss,[(a(!0),r(S,null,R(Object.entries(De(ve(c))),([v,q])=>(a(),r("div",{key:v},[t("div",as,[s(i(X),{class:"w-5 h-5 text-[#007d79]"}),t("h4",os,n(v),1),t("span",ls,"("+n(q.length)+")",1)]),q.length>0?(a(),r("div",ns,[(a(!0),r(S,null,R(q,E=>(a(),r("div",{key:E.id,class:"p-4 bg-slate-50 border border-slate-200 rounded-lg hover:shadow-md transition-shadow"},[t("div",rs,[t("div",is,[t("p",ds,[E.linkUrl?(a(),r("a",{key:0,href:E.linkUrl,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 hover:underline transition-colors cursor-pointer"},[T(n(E.linkUrl)+" ",1),e[32]||(e[32]=t("span",{class:"text-xs ml-1"},"ðŸ”—",-1))],8,us)):(a(),r("span",cs,n(E.fileName),1))]),t("p",ms,n(E.description),1),t("div",ps,[t("span",vs,n(E.category),1),c==="all"?(a(),r("span",gs,n(E.area),1)):_("",!0),t("span",fs,n(new Date(E.uploadDate).toLocaleDateString()),1)])]),s(h,{size:"sm",variant:"ghost"},{default:d(()=>[s(i(de),{className:"w-4 h-4"})]),_:1})])]))),128))])):(a(),r("div",xs,[s(i(X),{class:"w-12 h-12 mx-auto mb-2 text-slate-300"}),e[33]||(e[33]=t("p",{class:"text-slate-500"},"No documents in this category",-1))]))]))),128))]),u.value.trim()&&ve(f.value).length===0?(a(),r("div",hs,[s(i(J),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t("p",ys,'No planning documents found matching "'+n(u.value)+'"',1)])):_("",!0)]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"])])]),_:1}),((x=w.value)==null?void 0:x.role)===i(z).CONTRACT_MANAGEMENT_ANALYST||((I=w.value)==null?void 0:I.role)===i(z).CONTRACT_MANAGEMENT_SENIOR_MANAGER||((P=w.value)==null?void 0:P.role)===i(z).CONTRACT_MANAGEMENT_SUPERVISOR?(a(),b(Q,{key:0,value:"review",className:"space-y-6"},{default:d(()=>[t("div",ws,[t("div",_s,[e[34]||(e[34]=t("h3",{class:"text-2xl font-semibold text-slate-800"},"Documents Pending Review",-1)),t("span",bs,n(te.value.length)+" document(s) pending review ",1)]),te.value.length>0?(a(),r("div",ks,[(a(!0),r(S,null,R(te.value,c=>(a(),r("div",{key:c.id,class:"border border-amber-200 bg-amber-50 rounded-lg p-4 hover:shadow-md transition-shadow"},[t("div",Cs,[t("div",Ds,[t("div",Ns,[e[35]||(e[35]=t("span",{class:"px-2 py-1 bg-amber-100 text-amber-700 text-xs font-medium rounded"}," PENDING REVIEW ",-1)),t("span",$s,n(c.category),1),t("span",As,n(c.area),1),t("span",Ls,n(new Date(c.uploadDate).toLocaleDateString()),1)]),t("p",Ts,[c.linkUrl?(a(),r("a",{key:0,href:c.linkUrl,target:"_blank",rel:"noopener noreferrer",class:"text-blue-600 hover:text-blue-800 hover:underline transition-colors cursor-pointer"},[T(n(c.linkUrl)+" ",1),e[36]||(e[36]=t("span",{class:"text-xs ml-1"},"ðŸ”—",-1))],8,Ss)):(a(),r("span",Rs,n(c.fileName),1))]),t("p",Ms,n(c.description),1),c.metadata&&Object.keys(c.metadata).length>0?(a(),r("div",Es,[e[37]||(e[37]=t("div",{class:"text-xs text-slate-500 mb-1"},"Metadata:",-1)),t("div",Us,[(a(!0),r(S,null,R(Object.entries(c.metadata),([v,q])=>(a(),r("span",{key:v,class:"text-xs px-1 py-0.5 bg-gray-100 text-gray-600 rounded"},n(v)+": "+n(q),1))),128))])])):_("",!0),t("div",Ps,[s(h,{size:"sm",onClick:v=>ke(c.id),className:"bg-green-600 hover:bg-green-700 text-white"},{default:d(()=>[...e[38]||(e[38]=[T(" âœ“ Approve ",-1)])]),_:1},8,["onClick"]),s(h,{size:"sm",variant:"destructive",onClick:v=>Ce(c.id)},{default:d(()=>[...e[39]||(e[39]=[T("âœ— Reject",-1)])]),_:1},8,["onClick"]),s(h,{size:"sm",variant:"ghost"},{default:d(()=>[s(i(de),{class:"w-4 h-4"})]),_:1})])])])]))),128))])):(a(),r("div",Hs,[s(i(X),{class:"w-16 h-16 mx-auto mb-4 text-slate-300"}),t("h4",Os,n(u.value.trim()?`No Documents Found Matching "${u.value}"`:"No Documents Pending Review"),1),t("p",js,n(u.value.trim()?"No pending review documents match your search criteria.":"All documents have been reviewed or no documents have been submitted yet."),1)]))])]),_:1})):_("",!0)]}),_:1},8,["modelValue"])]),s(Se,{open:k.value,onClose:e[14]||(e[14]=x=>k.value=!1),workspace:"planning",preSelectedArea:f.value},null,8,["open","preSelectedArea"]),s(wt,{"is-open":p.value,"document-info":M.value,onClose:_e},null,8,["is-open","document-info"])])}}});export{Vs as default};
