import{d as H,u as P,h as q,r as w,c as d,a as e,b as l,e as a,w as n,f as G,t as o,g as u,F as _,i as g,j as b,n as y,l as D,o as i}from"./index-yVQkOYLA.js";import{c as J,B as K,_ as h}from"./building-2-DHT0u1MQ.js";import{_ as k,a as A}from"./Label.vue_vue_type_script_setup_true_lang-DbWrKH6f.js";import{f as Q,_ as X,a as Y,H as Z,h as ee,i as te,j as se,k as V,A as le,b as ae,c as N,d as F,U as oe,l as x,F as M,m as C,g as ne}from"./UploadModal.vue_vue_type_script_setup_true_lang-BnkSODvp.js";import{B as ie,U as re,L as de,F as ce}from"./user-_Z_9P_ix.js";import{T as $}from"./triangle-alert-0BXGon6r.js";/**
 * @license lucide-vue-next v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=J("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ue={class:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100"},xe={class:"bg-white border-b border-slate-200 shadow-sm"},me={class:"max-w-7xl mx-auto px-8 py-4 flex items-center justify-between"},pe={class:"flex items-center gap-6"},fe={class:"flex items-center gap-3"},_e={class:"w-10 h-10 bg-[#007d79] rounded-lg flex items-center justify-center"},ge={class:"flex items-center gap-6"},be={class:"text-right"},he={class:"font-semibold text-slate-800"},ye={class:"max-w-7xl mx-auto px-8 py-8"},ve={class:"mb-6 flex items-center gap-4"},we={class:"flex items-center justify-between mb-6"},De={class:"space-y-4"},ke={class:"flex items-start justify-between"},Ae={class:"flex-1"},Ce={class:"flex items-center gap-3 mb-2"},$e={class:"font-semibold text-lg text-slate-800"},Se={class:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded"},Ee={class:"text-slate-700 mb-1"},Le={class:"text-sm text-slate-600 mb-2"},Te={class:"flex gap-4 text-sm"},Ve={class:"text-slate-600"},Ne={class:"text-slate-600"},Fe={class:"text-slate-600"},Me={class:"space-y-6"},Be={class:"flex items-center gap-3 mb-4"},Re={class:"font-semibold text-lg text-slate-800"},Ue={class:"text-sm text-slate-500"},je={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-8"},ze={class:"flex items-start gap-3"},Oe={class:"flex-1"},Ie={class:"font-medium text-slate-800 mb-1"},We={class:"text-sm text-slate-600 mb-2"},He={key:0,class:"text-xs text-slate-500 mb-2"},Pe={class:"flex gap-2 flex-wrap"},qe={class:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded"},Ge={class:"text-xs px-2 py-1 bg-slate-200 text-slate-700 rounded"},Je={key:1,class:"text-center py-8 bg-slate-50 rounded-lg border border-dashed border-slate-300"},Ke={class:"overflow-x-auto"},Qe={class:"w-full"},Xe={class:"py-3 px-4 font-medium text-slate-800"},Ye={class:"py-3 px-4 text-slate-700"},Ze={class:"py-3 px-4 text-slate-700"},et={class:"py-3 px-4"},tt={class:"text-xs px-2 py-1 bg-white rounded"},st={class:"py-3 px-4 text-slate-700"},lt={class:"py-3 px-4"},at={key:0,class:"text-center py-12"},xt=H({__name:"ExecutionWorkspace",setup(ot){const S=G(),E=P(),R=q(()=>E.user),L=w("lifecycle"),p=w("All Areas"),v=w(!1),U=()=>{E.logout(),S.push("/login")},j=()=>p.value==="All Areas"?C:C.filter(r=>r.area===p.value),T=()=>C.filter(r=>{const t=x(r.endDate);return t==="warning"||t==="critical"}).sort((r,t)=>new Date(r.endDate).getTime()-new Date(t.endDate).getTime()),z=r=>ne().filter(c=>c.workspace!=="execution"?!1:r==="All Areas"?!0:c.area===r),O=r=>{const t={"Administration Management":[],"Deviation Management":[]};return r.forEach(c=>{c.category==="Administration Document"||c.category==="Minutes of Meeting"?t["Administration Management"].push(c):c.category==="Deviation Form"&&t["Deviation Management"].push(c)}),t},I=r=>{const t={normal:"border-l-[#007d79] bg-slate-50",warning:"border-l-yellow-500 bg-yellow-50",critical:"border-l-red-500 bg-red-50"};return t[r]||t.normal},W=r=>r==="critical"?"bg-red-100":"bg-yellow-100";return(r,t)=>{var c;return i(),d("div",ue,[e("div",xe,[e("div",me,[e("div",pe,[e("div",fe,[e("div",_e,[l(a(K),{class:"w-6 h-6 text-white"})]),t[5]||(t[5]=e("div",null,[e("h1",{class:"text-xl font-bold text-slate-800"},"CMT PORTAL")],-1))]),l(h,{variant:"ghost",size:"sm",onClick:t[0]||(t[0]=s=>a(S).push("/workspace-selector")),class:"flex items-center gap-2"},{default:n(()=>[l(a(Z),{class:"w-4 h-4"}),t[6]||(t[6]=u(" Home ",-1))]),_:1})]),e("div",ge,[e("div",be,[t[7]||(t[7]=e("p",{class:"text-sm text-slate-500"},"Welcome,",-1)),e("p",he,o((c=R.value)==null?void 0:c.name),1)]),l(h,{variant:"ghost",size:"icon",class:"rounded-full"},{default:n(()=>[l(a(ie),{class:"w-5 h-5 text-slate-600"})]),_:1}),l(h,{variant:"ghost",size:"icon",class:"rounded-full"},{default:n(()=>[l(a(re),{class:"w-5 h-5 text-slate-600"})]),_:1}),l(h,{onClick:U,variant:"ghost",size:"icon",class:"rounded-full hover:bg-red-50 hover:text-red-600"},{default:n(()=>[l(a(de),{class:"w-5 h-5"})]),_:1})])])]),e("div",ye,[t[22]||(t[22]=e("div",{class:"mb-8"},[e("h2",{class:"text-4xl font-light text-slate-800 mb-2"},"Execution Phase"),e("p",{class:"text-slate-500"},"Contract Lifecycle Management & Monitoring")],-1)),e("div",ve,[t[9]||(t[9]=e("label",{class:"text-sm font-medium text-slate-700"},"Filter by Area:",-1)),l(Q,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=s=>p.value=s),width:"w-64"},{default:n(()=>[l(ee,null,{default:n(()=>[l(te,{placeholder:"Select area"})]),_:1}),l(se,null,{default:n(()=>[l(V,{value:"All Areas",index:0},{default:n(()=>[...t[8]||(t[8]=[u("All Areas",-1)])]),_:1}),(i(!0),d(_,null,g(a(le),(s,f)=>(i(),b(V,{key:s,value:s,index:f+1},{default:n(()=>[u(o(s),1)]),_:2},1032,["value","index"]))),128))]),_:1})]),_:1},8,["modelValue"])]),l(X,{modelValue:L.value,"onUpdate:modelValue":t[3]||(t[3]=s=>L.value=s),class:"space-y-6"},{default:n(()=>[l(ae,{class:"bg-white p-1 shadow-sm border border-slate-200"},{default:n(()=>[l(N,{value:"lifecycle",class:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:n(()=>[...t[10]||(t[10]=[u(" Contract Lifecycle ",-1)])]),_:1}),l(N,{value:"reminders",class:"data-[state=active]:bg-[#007d79] data-[state=active]:text-white px-8 py-2.5"},{default:n(()=>[...t[11]||(t[11]=[u(" Expiry Reminders ",-1)])]),_:1})]),_:1}),l(F,{value:"lifecycle",className:"space-y-6"},{default:n(()=>[l(k,{class:"shadow-lg border-0"},{default:n(()=>[l(A,{class:"p-8"},{default:n(()=>[e("div",we,[t[13]||(t[13]=e("h3",{class:"text-2xl font-semibold text-slate-800"},"Active Contracts",-1)),l(h,{onClick:t[2]||(t[2]=s=>v.value=!0),className:"bg-[#007d79] hover:bg-[#006663] flex items-center gap-2"},{default:n(()=>[l(a(oe),{class:"w-4 h-4"}),t[12]||(t[12]=u(" Upload Document ",-1))]),_:1})]),e("div",De,[(i(!0),d(_,null,g(j(),s=>(i(),d("div",{key:s.id,class:y(`border-l-4 ${I(a(x)(s.endDate))} p-4 rounded-lg hover:shadow-md transition-shadow`)},[e("div",ke,[e("div",Ae,[e("div",Ce,[e("p",$e,o(s.id),1),e("span",Se,o(s.area),1),a(x)(s.endDate)!=="normal"?(i(),d("span",{key:0,class:y(`text-xs px-2 py-1 rounded flex items-center gap-1 ${a(x)(s.endDate)==="critical"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`)},[a(x)(s.endDate)==="critical"?(i(),b(a(B),{key:0,class:"w-3 h-3"})):(i(),b(a($),{key:1,class:"w-3 h-3"})),u(" "+o(a(x)(s.endDate)==="critical"?"Expiring Soon":"Warning"),1)],2)):D("",!0)]),e("p",Ee,o(s.title),1),e("p",Le,o(s.vendorName),1),e("div",Te,[e("span",Ve,[t[14]||(t[14]=e("strong",null,"Value:",-1)),u(" $"+o(s.value.toLocaleString()),1)]),e("span",Ne,[t[15]||(t[15]=e("strong",null,"Start:",-1)),u(" "+o(new Date(s.startDate).toLocaleDateString()),1)]),e("span",Fe,[t[16]||(t[16]=e("strong",null,"End:",-1)),u(" "+o(new Date(s.endDate).toLocaleDateString()),1)])])])])],2))),128))])]),_:1})]),_:1}),l(k,{class:"shadow-lg border-0"},{default:n(()=>[l(A,{class:"p-8"},{default:n(()=>[t[18]||(t[18]=e("h3",{class:"text-2xl font-semibold text-slate-800 mb-6"},"Contract Documents",-1)),e("div",Me,[(i(!0),d(_,null,g(Object.entries(O(z(p.value))),([s,f])=>(i(),d("div",{key:s},[e("div",Be,[l(a(M),{class:"w-5 h-5 text-[#007d79]"}),e("h4",Re,o(s),1),e("span",Ue,"("+o(f.length)+")",1)]),f.length>0?(i(),d("div",je,[(i(!0),d(_,null,g(f,m=>(i(),d("div",{key:m.id,class:"p-4 bg-slate-50 border border-slate-200 rounded-lg hover:shadow-md transition-shadow"},[e("div",ze,[l(a(ce),{class:"w-5 h-5 text-[#007d79] mt-1"}),e("div",Oe,[e("p",Ie,o(m.fileName||m.linkUrl),1),e("p",We,o(m.description),1),m.contractId?(i(),d("p",He,"Related: "+o(m.contractId),1)):D("",!0),e("div",Pe,[e("span",qe,o(m.category),1),e("span",Ge,o(m.area),1)])])])]))),128))])):(i(),d("div",Je,[l(a(M),{class:"w-12 h-12 mx-auto mb-2 text-slate-300"}),t[17]||(t[17]=e("p",{class:"text-slate-500"},"No documents in this category",-1))]))]))),128))])]),_:1})]),_:1})]),_:1}),l(F,{value:"reminders"},{default:n(()=>[l(k,{class:"shadow-lg border-0"},{default:n(()=>[l(A,{class:"p-8"},{default:n(()=>[t[21]||(t[21]=e("h3",{class:"text-2xl font-semibold text-slate-800 mb-6"},"Contract Expiry Reminders",-1)),e("div",Ke,[e("table",Qe,[t[19]||(t[19]=e("thead",null,[e("tr",{class:"border-b-2 border-slate-200"},[e("th",{class:"text-left py-3 px-4 font-semibold text-slate-700"},"Contract ID"),e("th",{class:"text-left py-3 px-4 font-semibold text-slate-700"},"Title"),e("th",{class:"text-left py-3 px-4 font-semibold text-slate-700"},"Vendor"),e("th",{class:"text-left py-3 px-4 font-semibold text-slate-700"},"Area"),e("th",{class:"text-left py-3 px-4 font-semibold text-slate-700"},"End Date"),e("th",{class:"text-left py-3 px-4 font-semibold text-slate-700"},"Status")])],-1)),e("tbody",null,[(i(!0),d(_,null,g(T(),s=>(i(),d("tr",{key:s.id,class:y(`${W(a(x)(s.endDate))} border-b border-slate-200`)},[e("td",Xe,o(s.id),1),e("td",Ye,o(s.title),1),e("td",Ze,o(s.vendorName),1),e("td",et,[e("span",tt,o(s.area),1)]),e("td",st,o(new Date(s.endDate).toLocaleDateString()),1),e("td",lt,[e("span",{class:y(`flex items-center gap-1 text-sm font-medium ${a(x)(s.endDate)==="critical"?"text-red-700":"text-yellow-700"}`)},[a(x)(s.endDate)==="critical"?(i(),b(a(B),{key:0,class:"w-4 h-4"})):(i(),b(a($),{key:1,class:"w-4 h-4"})),u(" "+o(a(x)(s.endDate)==="critical"?"Critical (<3 months)":"Warning (<6 months)"),1)],2)])],2))),128))])]),T().length===0?(i(),d("div",at,[l(a($),{class:"w-12 h-12 mx-auto mb-3 text-slate-300"}),t[20]||(t[20]=e("p",{class:"text-slate-500"},"No contracts nearing expiration",-1))])):D("",!0)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l(Y,{open:v.value,onClose:t[4]||(t[4]=s=>v.value=!1),workspace:"execution",preSelectedArea:p.value!=="All Areas"?p.value:""},null,8,["open","preSelectedArea"])])}}});export{xt as default};
